<!DOCTYPE html>
<html>
  <head>
    <title>Force New Tab</title>
    <script type="text/javascript">
      safari.application.addEventListener(
        'message',
        function(event) {
          var currentIndex = safari.application.activeBrowserWindow.tabs
            .indexOf(safari.application.activeBrowserWindow.activeTab);

          var tab = safari.application.activeBrowserWindow.openTab(
            null,
            currentIndex + 1
          );
          tab.url = event.message;
        },
        false
      );
    </script>
  </head>
  <body>
  </body>
</html>
